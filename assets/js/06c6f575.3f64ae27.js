"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3057],{3898:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"module-1-ros2/basic-ros2-programming","title":"Basic ROS 2 Programming with Python","description":"Now that you have a solid understanding of the core ROS 2 concepts and have your environment set up, it\'s time to write your first ROS 2 program! We will create a simple publisher and subscriber in Python.","source":"@site/docs/module-1-ros2/basic-ros2-programming.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/basic-ros2-programming","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/module-1-ros2/basic-ros2-programming","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Basic ROS 2 Programming"},"sidebar":"mainSidebar","previous":{"title":"Setting Up ROS 2","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/module-1-ros2/ros2-setup"},"next":{"title":"URDF and Xacro","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/module-1-ros2/urdf-xacro"}}');var i=s(4848),t=s(8453);const o={sidebar_label:"Basic ROS 2 Programming"},c="Basic ROS 2 Programming with Python",a={},l=[{value:"1. Create a ROS 2 Package",id:"1-create-a-ros-2-package",level:2},{value:"2. Write the Publisher Node",id:"2-write-the-publisher-node",level:2},{value:"3. Write the Subscriber Node",id:"3-write-the-subscriber-node",level:2},{value:"4. Add Entry Points to <code>setup.py</code>",id:"4-add-entry-points-to-setuppy",level:2},{value:"5. Build and Run",id:"5-build-and-run",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"basic-ros-2-programming-with-python",children:"Basic ROS 2 Programming with Python"})}),"\n",(0,i.jsx)(n.p,{children:"Now that you have a solid understanding of the core ROS 2 concepts and have your environment set up, it's time to write your first ROS 2 program! We will create a simple publisher and subscriber in Python."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"publisher"}),' node will publish a "Hello, World!" message to a topic.']}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"subscriber"})," node will subscribe to that topic and print the message it receives."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-create-a-ros-2-package",children:"1. Create a ROS 2 Package"}),"\n",(0,i.jsxs)(n.p,{children:["First, let's create a new package in the ",(0,i.jsx)(n.code,{children:"src"})," directory of your ROS 2 workspace (",(0,i.jsx)(n.code,{children:"~/ros2_ws"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_first_package\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command creates a new directory called ",(0,i.jsx)(n.code,{children:"my_first_package"})," with the following structure:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_first_package/\n\u251c\u2500\u2500 my_first_package/\n\u2502   \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 resource/\n\u2502   \u2514\u2500\u2500 my_first_package\n\u251c\u2500\u2500 test/\n\u2502   \u251c\u2500\u2500 test_copyright.py\n\u2502   \u251c\u2500\u2500 test_flake8.py\n\u2502   \u2514\u2500\u2500 test_pep257.py\n\u251c\u2500\u2500 package.xml\n\u2514\u2500\u2500 setup.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2-write-the-publisher-node",children:"2. Write the Publisher Node"}),"\n",(0,i.jsx)(n.p,{children:"Now, let's create a file for our publisher node."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd my_first_package/my_first_package\ntouch publisher_node.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.code,{children:"publisher_node.py"})," in your favorite editor and add the following code:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MyPublisher(Node):\n    def __init__(self):\n        super().__init__('my_publisher_node')\n        self.publisher_ = self.create_publisher(String, 'my_topic', 10)\n        self.timer = self.create_timer(0.5, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello, World! {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    my_publisher = MyPublisher()\n    rclpy.spin(my_publisher)\n    my_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This code creates a node called ",(0,i.jsx)(n.code,{children:"my_publisher_node"})," that publishes a ",(0,i.jsx)(n.code,{children:"String"})," message to the ",(0,i.jsx)(n.code,{children:"my_topic"})," topic every 0.5 seconds."]}),"\n",(0,i.jsx)(n.h2,{id:"3-write-the-subscriber-node",children:"3. Write the Subscriber Node"}),"\n",(0,i.jsx)(n.p,{children:"Next, let's create the subscriber node."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"touch subscriber_node.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add the following code to ",(0,i.jsx)(n.code,{children:"subscriber_node.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MySubscriber(Node):\n    def __init__(self):\n        super().__init__('my_subscriber_node')\n        self.subscription = self.create_subscription(\n            String,\n            'my_topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    my_subscriber = MySubscriber()\n    rclpy.spin(my_subscriber)\n    my_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This code creates a node called ",(0,i.jsx)(n.code,{children:"my_subscriber_node"})," that subscribes to the ",(0,i.jsx)(n.code,{children:"my_topic"})," topic and prints any message it receives."]}),"\n",(0,i.jsxs)(n.h2,{id:"4-add-entry-points-to-setuppy",children:["4. Add Entry Points to ",(0,i.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,i.jsxs)(n.p,{children:["To make our nodes executable, we need to add them as entry points in the ",(0,i.jsx)(n.code,{children:"setup.py"})," file. Open ",(0,i.jsx)(n.code,{children:"setup.py"})," and modify the ",(0,i.jsx)(n.code,{children:"entry_points"})," section to look like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'my_publisher = my_first_package.publisher_node:main',\n        'my_subscriber = my_first_package.subscriber_node:main',\n    ],\n},\n"})}),"\n",(0,i.jsx)(n.h2,{id:"5-build-and-run",children:"5. Build and Run"}),"\n",(0,i.jsxs)(n.p,{children:["Now, let's build our package. Go to the root of your workspace and run ",(0,i.jsx)(n.code,{children:"colcon build"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\n"})}),"\n",(0,i.jsx)(n.p,{children:"After the build is finished, source your workspace's setup file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now you can run your nodes!\nIn one terminal, run the publisher:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_first_package my_publisher\n"})}),"\n",(0,i.jsx)(n.p,{children:"In another terminal, run the subscriber:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_first_package my_subscriber\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should see the publisher printing the messages it's sending, and the subscriber printing the messages it's receiving."}),"\n",(0,i.jsx)(n.p,{children:"Congratulations! You have successfully created your first ROS 2 publisher and subscriber. This simple pattern is the foundation for building much more complex and capable robotic systems."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);
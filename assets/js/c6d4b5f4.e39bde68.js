"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4837],{7143:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"module-2-digital-twin/ros2-integration-simulation","title":"Integrating ROS 2 with Your Simulation","description":"Having a simulated robot that you can control with ROS 2 is a powerful combination. The key to making this work smoothly is the integration between the ROS 2 ecosystem and the simulator. This is typically achieved through a ROS bridge and managed with ROS 2 launch files.","source":"@site/docs/module-2-digital-twin/ros2-integration-simulation.mdx","sourceDirName":"module-2-digital-twin","slug":"/module-2-digital-twin/ros2-integration-simulation","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module-2-digital-twin/ros2-integration-simulation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"ROS 2 Integration with Simulation"},"sidebar":"mainSidebar","previous":{"title":"Simulating Sensors and Actuators","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module-2-digital-twin/simulating-sensors-actuators"},"next":{"title":"Module 3: AI-Robot Brain (NVIDIA Isaac)","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/category/module-3-ai-robot-brain-nvidia-isaac"}}');var o=n(4848),a=n(8453);const s={sidebar_label:"ROS 2 Integration with Simulation"},r="Integrating ROS 2 with Your Simulation",l={},h=[{value:"The Role of the ROS Bridge",id:"the-role-of-the-ros-bridge",level:2},{value:"Orchestration with ROS 2 Launch Files",id:"orchestration-with-ros-2-launch-files",level:2},{value:"Visualizing with RViz",id:"visualizing-with-rviz",level:2},{value:"Example: A Complete Simulation Launch File",id:"example-a-complete-simulation-launch-file",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"integrating-ros-2-with-your-simulation",children:"Integrating ROS 2 with Your Simulation"})}),"\n",(0,o.jsxs)(t.p,{children:["Having a simulated robot that you can control with ROS 2 is a powerful combination. The key to making this work smoothly is the integration between the ROS 2 ecosystem and the simulator. This is typically achieved through a ",(0,o.jsx)(t.strong,{children:"ROS bridge"})," and managed with ",(0,o.jsx)(t.strong,{children:"ROS 2 launch files"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"the-role-of-the-ros-bridge",children:"The Role of the ROS Bridge"}),"\n",(0,o.jsx)(t.p,{children:"A ROS bridge is a component that translates messages between the simulator's internal communication system and the ROS 2 network."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["In ",(0,o.jsx)(t.strong,{children:"Gazebo"}),", the ROS bridge is provided by a set of plugins (like the ones we saw in the previous sections) that directly publish and subscribe to ROS 2 topics."]}),"\n",(0,o.jsxs)(t.li,{children:["In ",(0,o.jsx)(t.strong,{children:"Unity"})," and ",(0,o.jsx)(t.strong,{children:"Isaac Sim"}),", there is a dedicated ROS Bridge component that you add to your simulation scene to connect to your ROS 2 application."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"This bridge is what allows your ROS 2 nodes (e.g., for navigation, perception, or control) to communicate with the simulated robot and its environment as if it were real hardware."}),"\n",(0,o.jsx)(t.h2,{id:"orchestration-with-ros-2-launch-files",children:"Orchestration with ROS 2 Launch Files"}),"\n",(0,o.jsx)(t.p,{children:"A typical robotics application consists of many different nodes that need to be started in the correct order. A ROS 2 launch file is a Python script that allows you to define and launch a complex system of nodes with a single command."}),"\n",(0,o.jsx)(t.p,{children:"When working with simulation, a launch file is used to:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Start the simulator (e.g., Gazebo)."}),"\n",(0,o.jsx)(t.li,{children:"Spawn your robot model into the simulation."}),"\n",(0,o.jsxs)(t.li,{children:["Start the ",(0,o.jsx)(t.code,{children:"robot_state_publisher"})," to publish the robot's state."]}),"\n",(0,o.jsx)(t.li,{children:"Start RViz for visualization."}),"\n",(0,o.jsx)(t.li,{children:"Start any other nodes required for your application (e.g., navigation, control)."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"visualizing-with-rviz",children:"Visualizing with RViz"}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"RViz"})," is a powerful 3D visualization tool for ROS. It allows you to view the state of your robot and its sensor data in a 3D environment. When working with simulation, you can use RViz to:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Display the 3D model of your robot."}),"\n",(0,o.jsx)(t.li,{children:"Visualize sensor data, such as Lidar scans, camera images, and IMU orientation."}),"\n",(0,o.jsx)(t.li,{children:"Monitor the output of your navigation stack, such as the planned path and costmaps."}),"\n",(0,o.jsx)(t.li,{children:"Send commands to your robot, such as setting a navigation goal."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"example-a-complete-simulation-launch-file",children:"Example: A Complete Simulation Launch File"}),"\n",(0,o.jsxs)(t.p,{children:["Let's look at an example of a ROS 2 launch file that starts Gazebo, spawns a robot, and starts a ",(0,o.jsx)(t.code,{children:"robot_state_publisher"})," and RViz."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # Get the path to the Gazebo ROS launch file\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([os.path.join(\n            get_package_share_directory('gazebo_ros'), 'launch'), '/gazebo.launch.py']),\n        )\n\n    # Get the path to the URDF file\n    urdf_file_name = 'my_robot.urdf'\n    urdf = os.path.join(\n        get_package_share_directory('my_robot_description'),\n        'urdf',\n        urdf_file_name)\n\n    # Spawn the robot in Gazebo\n    spawn_entity = Node(package='gazebo_ros', executable='spawn_entity.py',\n                        arguments=['-topic', 'robot_description',\n                                   '-entity', 'my_robot'],\n                        output='screen')\n\n    # Start the robot state publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        output='screen',\n        parameters=[{'robot_description': open(urdf).read()}])\n\n    # Start RViz\n    rviz = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        arguments=['-d', os.path.join(get_package_share_directory('my_robot_description'), 'rviz', 'default.rviz')])\n\n    return LaunchDescription([\n        gazebo,\n        robot_state_publisher,\n        spawn_entity,\n        rviz,\n    ])\n"})}),"\n",(0,o.jsx)(t.p,{children:"This launch file does the following:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Includes the standard ",(0,o.jsx)(t.code,{children:"gazebo.launch.py"})," to start the Gazebo simulator."]}),"\n",(0,o.jsx)(t.li,{children:"Finds the URDF file for the robot."}),"\n",(0,o.jsxs)(t.li,{children:["Uses the ",(0,o.jsx)(t.code,{children:"spawn_entity.py"})," script to spawn the robot in Gazebo."]}),"\n",(0,o.jsxs)(t.li,{children:["Starts a ",(0,o.jsx)(t.code,{children:"robot_state_publisher"})," to publish the robot's state based on the URDF."]}),"\n",(0,o.jsx)(t.li,{children:"Starts RViz with a pre-configured view."}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["By creating a launch file like this, you can start your entire simulation environment with a single command:\n",(0,o.jsx)(t.code,{children:"ros2 launch my_robot_description my_simulation.launch.py"})]}),"\n",(0,o.jsx)(t.p,{children:'This tight integration between ROS 2 and simulation is what enables the "digital twin" development philosophy, where you can seamlessly switch between developing on a simulated robot and a physical one.'})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(6540);const o={},a=i.createContext(o);function s(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);
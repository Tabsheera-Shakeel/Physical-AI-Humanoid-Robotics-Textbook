---
sidebar_position: 4
sidebar_label: Robot Description Format
title: Robot Description Format (URDF and Xacro)
---

# Robot Description Format (URDF and Xacro)

To accurately represent robots in ROS 2 and simulation environments, a standardized format is necessary to describe their physical and kinematic properties. The Unified Robot Description Format (URDF) and its extension, Xacro, are the primary tools used for this purpose in the ROS ecosystem.

## Unified Robot Description Format (URDF)

URDF is an XML-based file format that describes all aspects of a robot. It's a fundamental component for working with robots in ROS 2, enabling visualization, simulation, and motion planning.

### Key Elements of URDF

1.  **`<robot>` tag:** The root element of every URDF file, which contains all other elements and defines the robot's name.

2.  **`<link>` tag:**
    *   **Definition:** Represents a rigid body segment of the robot (e.g., a torso, an arm, a wheel).
    *   **Properties:**
        *   `inertial`: Describes the mass, center of mass, and inertia tensor, crucial for physics simulation.
        *   `visual`: Defines the 3D model (e.g., `.stl`, `.dae` file), color, and origin for visualization.
        *   `collision`: Specifies the collision geometry and origin, used for collision detection in simulations.

3.  **`<joint>` tag:**
    *   **Definition:** Describes the kinematic and dynamic properties of the connection between two links.
    *   **Attributes:**
        *   `name`: Unique identifier for the joint.
        *   `type`: Specifies the joint type (e.g., `revolute`, `continuous`, `prismatic`, `fixed`, `floating`, `planar`).
        *   `parent`: The name of the parent link.
        *   `child`: The name of the child link.
    *   **Elements:**
        *   `origin`: Defines the pose of the child link relative to the parent link.
        *   `axis`: Specifies the axis of rotation or translation for the joint.
        *   `limit`: Defines the joint's position, velocity, and effort limits.
        *   `calibration`, `dynamics`, `mimic`, `safety_controller`: Additional optional properties.

### Example URDF Structure

```xml
<?xml version="1.0"?>
<robot name="my_simple_robot">

  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.6 0.4 0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 0.8 1"/>
      </material>
    </visual>
  </link>

  <link name="wheel_link">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
  </link>

  <joint name="base_to_wheel" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_link"/>
    <origin xyz="0.25 0 0" rpy="0 1.5707 0"/>
    <axis xyz="0 1 0"/>
  </joint>

</robot>
```

## Xacro (XML Macros for URDF)

Writing complex robots entirely in URDF can be tedious and prone to errors due to repetition. Xacro (XML Macros) is an XML macro language that allows you to use macros, variables, and mathematical expressions to generate URDF files more efficiently.

### Advantages of Xacro

*   **Modularity:** Define reusable components (e.g., a finger, a wheel assembly) as macros.
*   **Parameterization:** Use variables to easily change dimensions, masses, or other properties without modifying every instance.
*   **Readability:** Reduces redundancy, making robot descriptions cleaner and easier to understand.
*   **Calculations:** Perform simple mathematical operations directly within the file.

### Key Xacro Elements

*   **`<xacro:macro>`:** Defines a reusable block of XML.
*   **`<xacro:arg>`:** Declares arguments for a macro.
*   **`${arg_name}`:** References an argument or variable.
*   **`<xacro:property>`:** Defines a variable.
*   **`$(arg var_name)`:** Accesses command-line arguments passed to Xacro.
*   **`$(op value1 value2)`:** Performs mathematical operations.

### Example Xacro Snippet

```xml
<?xml version="1.0"?>
<robot name="my_xacro_robot" xmlns:xacro="http://ros.org/xacro">

  <xacro:property name="wheel_radius" value="0.1" />
  <xacro:property name="wheel_thickness" value="0.05" />
  <xacro:property name="base_width" value="0.4" />

  <xacro:macro name="simple_wheel" params="prefix parent_link x_offset y_offset z_offset">
    <link name="${prefix}_wheel_link">
      <visual>
        <geometry>
          <cylinder radius="${wheel_radius}" length="${wheel_thickness}"/>
        </geometry>
        <material name="black"/>
      </visual>
    </link>

    <joint name="${parent_link}_to_${prefix}_wheel" type="continuous">
      <parent link="${parent_link}"/>
      <child link="${prefix}_wheel_link"/>
      <origin xyz="${x_offset} ${y_offset} ${z_offset}" rpy="0 1.5707 0"/>
      <axis xyz="0 1 0"/>
    </joint>
  </xacro:macro>

  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.6 ${base_width} 0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 0.8 1"/>
      </material>
    </visual>
  </link>

  <xacro:simple_wheel prefix="left" parent_link="base_link" x_offset="0.25" y_offset="${base_width/2 + wheel_thickness/2}" z_offset="0"/>
  <xacro:simple_wheel prefix="right" parent_link="base_link" x_offset="0.25" y_offset="${-base_width/2 - wheel_thickness/2}" z_offset="0"/>

</robot>
```

To convert a `.xacro` file to a `.urdf` file, you can use the `xacro` command-line tool:

```bash
ros2 run xacro xacro my_robot.xacro > my_robot.urdf
```

Understanding and utilizing URDF and Xacro are crucial skills for anyone working with ROS 2 robots, especially when dealing with complex humanoid designs, as they provide the foundation for visualization, simulation, and control.